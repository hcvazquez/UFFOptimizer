!function(t,e,n){"use strict";function i(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return i(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var e=t?this.internal_createDelay(t):this.internal_createDelay();return i(e.delayTime),e},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start?(t.internal_start=t.start,t.start=function(e,n,i){"undefined"!=typeof i?t.internal_start(e||0,n,i):t.internal_start(e||0,n||0)}):t.start=function(t,e,n){e||n?this.noteGrainOn(t||0,e,n):this.noteOn(t||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(t){this.noteOff(t||0)},i(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return i(t.threshold),i(t.knee),i(t.ratio),i(t.reduction),i(t.attack),i(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return i(t.frequency),i(t.detune),i(t.Q),i(t.gain),t},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start?(t.internal_start=t.start,t.start=function(e){t.internal_start(e||0)}):t.start=function(t){this.noteOn(t||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(t){this.noteOff(t||0)},t.setPeriodicWave||(t.setPeriodicWave=t.setWaveTable),i(t.frequency),i(t.detune),t})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)}(window),function t(e,n,i){function o(r,a){if(!n[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){var n=e[r][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e,n){var i=t("underscore"),o=t("pd-fileutils.parser"),s=t("./lib/core/Patch"),r=t("./lib/core/Abstraction"),a=t("./lib/core/PdObject"),c=t("./lib/core/mixins"),u=t("./lib/core/errors"),l=t("./lib/waa/portlets"),f=t("./lib/waa/interfaces"),h=t("./lib/global"),d=t("./lib/core/interfaces"),p=i.extend({},c.UniqueIdsMixin);t("./lib/index").declareObjects(h.library);var g=e.exports={start:function(t){t=t||{},h.isStarted||("undefined"!=typeof AudioContext?(h.audio=t.audio||new f.Audio({channelCount:h.settings.channelCount,audioContext:t.audioContext}),h.clock=t.clock||new f.Clock({audioContext:h.audio.context,waaClock:t.waaClock})):(h.audio=t.audio||d.Audio,h.clock=t.clock||d.Clock),h.storage=t.storage?t.storage:"undefined"!=typeof window?new f.Storage:d.Storage,h.audio.start(),i.values(h.patches).forEach(function(t){t.start()}),h.isStarted=!0)},stop:function(){h.isStarted&&(h.isStarted=!1,i.values(h.patches).forEach(function(t){t.stop()}),h.audio.stop())},isStarted:function(){return h.isStarted},getAudio:function(){return h.audio},send:function(t,e){h.emitter.emit("msg:"+t,e)},receive:function(t,e){h.emitter.on("msg:"+t,e)},registerAbstraction:function(t,e){i.isString(e)&&(e=o.parse(e));var n=function(t,n,i){var t=new r(t,n,i);return t.patchId=p._generateId(),g._preparePatch(t,e),t};n.prototype=r.prototype,this.registerExternal(t,n)},registerExternal:function(t,e){h.library[t]=e},createPatch:function(){var t=this._createPatch();return h.isStarted&&t.start(),t},destroyPatch:function(t){t.stop(),t.destroy(),delete h.patches[t.patchId]},loadPatch:function(t){var e=this._createPatch();return i.isString(t)&&(t=this.parsePatch(t)),this._preparePatch(e,t),h.isStarted&&e.start(),e},parsePatch:function(t){return i.isString(t)&&(t=o.parse(t)),t},_createPatch:function(){var t=new s;return t.patchId=p._generateId(),h.patches[t.patchId]=t,t},_preparePatch:function(t,e){var n={},i=[];if(e.nodes.forEach(function(e){var o,s=e.proto;try{o=t._createObject(s,e.args||[])}catch(r){if(r instanceof u.UnknownObjectError)return i.push([r.message,r]);throw r}"array"==o.type&&e.data&&o.setData(new Float32Array(e.data),!0),("pd"===s||"graph"===s)&&g._preparePatch(o,e.subpatch),n[e.id]=o}),e.connections.forEach(function(t){var e=n[t.source.id],o=n[t.sink.id];if(!e||!o){var s="invalid connection "+t.source.id+".* -> "+t.sink.id+".*";return i.push([s,new Error(s)])}try{e.o(t.source.port).connect(o.i(t.sink.port))}catch(r){if(r instanceof u.InvalidPortletError){var s="invalid connection "+t.source.id+"."+t.source.port+" -> "+t.sink.id+"."+t.sink.port;return i.push([s,r])}}}),t.patchData=e,i.length)throw new u.PatchLoadError(i)},core:{PdObject:a,portlets:l,errors:u},_glob:h};"undefined"!=typeof window&&(window.Pd=g)},{"./lib/core/Abstraction":3,"./lib/core/Patch":5,"./lib/core/PdObject":6,"./lib/core/errors":7,"./lib/core/interfaces":8,"./lib/core/mixins":9,"./lib/global":12,"./lib/index":14,"./lib/waa/interfaces":16,"./lib/waa/portlets":17,"pd-fileutils.parser":20,underscore:23}],2:[function(t,e,n){var i=(t("events").EventEmitter,t("underscore")),o=t("./core/utils"),s=t("./core/mixins"),r=t("./core/PdObject"),a=(t("./core/Patch"),t("./global")),c=t("./waa/portlets");n.declareObjects=function(t){var e=r.extend({inletDefs:[c.Inlet.extend({message:function(t){this.obj._onMessageReceived(t)}})],outletDefs:[c.Outlet],init:function(t,e,n,i,o){if(this._eventReceiver=new s.EventReceiver,this.value=n?o:i,t&&"-"!==t&&"empty"!==t&&(this.receiveName=t,this._onMessageReceived&&(this._onMessageReceived=this._onMessageReceived.bind(this),this._eventReceiver.on(a.emitter,"msg:"+this.receiveName,this._onMessageReceived))),e&&"-"!==e&&"empty"!==e&&(this.sendName=e),n&&this.patch){var r=this;this._onPatchStarted=function(){r._sendMessage([r.value])},this._eventReceiver.on(this.patch,"started",this._onPatchStarted)}},destroy:function(){this._eventReceiver.destroy()},_sendMessage:function(t){this.o(0).message(t),this.sendName&&a.emitter.emit("msg:"+this.sendName,t)}});t.symbolatom=e.extend({type:"symbolatom",init:function(t){var n=(t[0]||void 0,t[1]||void 0,t[2]),i=t[3];e.prototype.init.apply(this,[n,i,0,"symbol",0])},_onMessageReceived:function(t){var e=t[0];return"bang"===e||i.isNumber(e)||"symbol"===e?(i.isNumber(e)?this.value="float":"symbol"===e&&(this.value=t[1]),void this._sendMessage(o.timeTag(["symbol",this.value],t))):console.error("invalid "+e)}});var n=e.extend({init:function(t,n,o,s,r,a){this._limitInput=function(t){return i.isNumber(r)&&(t=Math.min(t,r)),i.isNumber(s)&&(t=Math.max(t,s)),t},e.prototype.init.apply(this,[n,o,t,0,a])},_onMessageReceived:function(t){var e=t[0];return"bang"===e||i.isNumber(e)?(i.isNumber(e)&&(this.value=e),void this._sendMessage(o.timeTag([this._limitInput(this.value)],t))):console.error("invalid "+e)}});t.floatatom=n.extend({type:"floatatom",init:function(t){var e=t[0]||void 0,i=t[1]||void 0,o=t[2],s=t[3];n.prototype.init.apply(this,[0,o,s,e,i,0])}}),t.nbx=n.extend({type:"nbx",init:function(t){var e=t[0]||void 0,i=t[1]||void 0,o=t[2]||0,s=t[3],r=t[4],a=t[5]||0;n.prototype.init.apply(this,[o,s,r,e,i,a])}}),t.bng=e.extend({type:"bng",init:function(t){var n=t[0]||0,i=t[1],o=t[2];e.prototype.init.apply(this,[i,o,n,"bang","bang"])},_onMessageReceived:function(t){this._sendMessage(o.timeTag(["bang"],t))}}),t.tgl=e.extend({type:"tgl",init:function(t){var n=t[0]||0,o=t[1],s=t[2],r=t[3]||0,a=i.isNumber(t[4])?t[4]:1;e.prototype.init.apply(this,[o,s,n,0,r]),this.nonZeroValue=a},_onMessageReceived:function(t){var e=t[0];if("bang"===e)this.value=0===this.value?this.nonZeroValue:0,this._sendMessage(o.timeTag([this.value],t));else{if(!i.isNumber(e))return console.error("invalid message received "+t);this.value=0===e?0:this.nonZeroValue,this._sendMessage(o.timeTag([e],t))}}});var u=n.extend({init:function(t){var e=t[0]||0,o=i.isNumber(t[1])?t[1]:127,s=t[2]||0,r=t[3],a=t[4],c=t[5]||0;n.prototype.init.apply(this,[s,r,a,e,o,c])}});t.hsl=u.extend({type:"hsl"}),t.vsl=u.extend({type:"vsl"});var l=e.extend({init:function(t){var n=(t[0],t[1]),o=i.isNumber(t[2])?t[2]:8,s=t[3],r=t[4],a=t[5]||0;this._limitInput=function(t){return Math.floor(Math.min(Math.max(t,0),o-1))},e.prototype.init.apply(this,[s,r,n,0,a])},_onMessageReceived:function(t){var e=t[0];return"bang"===e||i.isNumber(e)?(i.isNumber(e)&&(this.value=e),void this._sendMessage(o.timeTag([this._limitInput(this.value)],t))):console.error("invalid "+e)}});t.hradio=l.extend({type:"hradio"}),t.vradio=l.extend({type:"vradio"}),t.vu=e.extend({init:function(t){var n=t[0];e.prototype.init.apply(this,[n,void 0,0,0,0])},_onMessageReceived:function(t){this._sendMessage(t)}})}},{"./core/Patch":5,"./core/PdObject":6,"./core/mixins":9,"./core/utils":11,"./global":12,"./waa/portlets":17,events:18,underscore:23}],3:[function(t,e,n){var i=t("underscore"),o=t("./Patch"),s=e.exports=function(t,e,n){o.apply(this,arguments)};i.extend(s.prototype,o.prototype,{getPatchRoot:function(){return this}})},{"./Patch":5,underscore:23}],4:[function(t,e,n){var i=t("underscore"),o=(t("util").inherits,t("./errors")),s=(t("./portlets"),t("./utils"),e.exports=function(t,e,n){n=n||[];var i=this;this.id=e,this.patch=t,this.inlets=this.inletDefs.map(function(t,e){return new t(i,e)}),this.outlets=this.outletDefs.map(function(t,e){return new t(i,e)}),this.init(n)});i.extend(s.prototype,{endPoint:!1,doResolveArgs:!1,outletDefs:[],inletDefs:[],init:function(){},start:function(){},stop:function(){},destroy:function(){},i:function(t){if(t<this.inlets.length)return this.inlets[t];throw new o.InvalidPortletError("invalid inlet "+t)},o:function(t){if(t<this.outlets.length)return this.outlets[t];throw new o.InvalidPortletError("invalid outlet "+t)},startPortlets:function(){this.outlets.forEach(function(t){t.start()}),this.inlets.forEach(function(t){t.start()})},stopPortlets:function(){this.outlets.forEach(function(t){t.stop()}),this.inlets.forEach(function(t){t.stop()})}})},{"./errors":7,"./portlets":10,"./utils":11,underscore:23,util:26}],5:[function(t,e,n){var i=t("underscore"),o=t("events").EventEmitter,s=t("./mixins"),r=t("./utils"),a=t("./BaseNode"),c=t("./errors"),u=t("../global"),l=e.exports=function(){a.apply(this,arguments),this.objects=[],this.endPoints=[],this.patchId=null,this.patchData=null,this.blockSize=u.settings.blockSize};i.extend(l.prototype,a.prototype,s.UniqueIdsMixin,o.prototype,{type:"patch",init:function(t){this.args=t},start:function(){this.startObjects(),this.startPortlets()},stop:function(){this.stopObjects(),this.stopPortlets()},destroy:function(){this.objects.forEach(function(t){t.destroy()})},startObjects:function(){this.objects.forEach(function(t){t.startObjects?t.startObjects():t.start()})},stopObjects:function(){this.objects.forEach(function(t){t.stopObjects?t.stopObjects():t.stop()})},startPortlets:function(){this.objects.forEach(function(t){t.startPortlets()}),this.emit("started")},stopPortlets:function(){this.objects.forEach(function(t){t.stopPortlets()}),this.emit("stopped")},createObject:function(t,e){var n=this._createObject(t,e);return u.isStarted&&(n.start(),n.startPortlets()),n},_createObject:function(t,e){var n;if(e=e||[],!u.library.hasOwnProperty(t))throw new c.UnknownObjectError(t);var i=u.library[t];return i.prototype.doResolveArgs&&(e=this.resolveArgs(e)),n=new i(this,this._generateId(),e),this.objects[n.id]=n,n.endPoint&&this.endPoints.push(n),f(n)&&this.inlets.push(n.inlets[0]),h(n)&&this.outlets.push(n.outlets[0]),n},resolveArgs:function(t){var e,n=t.slice(0),i=this.getPatchRoot().patchId;return e=[i].concat(this.args),t.forEach(function(t,e){"b"===t?n[e]="bang":"f"===t?n[e]="float":"s"===t?n[e]="symbol":"a"===t?n[e]="anything":"l"===t&&(n[e]="list")}),r.getDollarResolver(n)(e)},getPatchRoot:function(){return this.patch?this.patch.getPatchRoot():this}});var f=function(t){return[u.library.inlet,u.library["inlet~"]].some(function(e){return t instanceof e})},h=function(t){return[u.library.outlet,u.library["outlet~"]].some(function(e){return t instanceof e})}},{"../global":12,"./BaseNode":4,"./errors":7,"./mixins":9,"./utils":11,events:18,underscore:23}],6:[function(t,e,n){var i=t("underscore"),o=(t("util").inherits,t("./portlets"),t("./utils")),s=t("./BaseNode"),r=(t("./Patch"),t("../global"),e.exports=function(){s.apply(this,arguments)});r.extend=o.chainExtend,i.extend(r.prototype,s.prototype,{doResolveArgs:!0})},{"../global":12,"./BaseNode":4,"./Patch":5,"./portlets":10,"./utils":11,underscore:23,util:26}],7:[function(t,e,n){var i=t("underscore"),o=n.PatchLoadError=function(t){this.name="PatchLoadError",this.errorList=t,this.message=i.pluck(t,0).join("\n"),this.stack=(new Error).stack};o.prototype=Object.create(Error.prototype),o.prototype.constructor=o;var s=n.UnknownObjectError=function(t){this.name="UnknownObjectError",this.message="unknown object "+t,this.objectType=t,this.stack=(new Error).stack};s.prototype=Object.create(Error.prototype),s.prototype.constructor=s;var r=n.InvalidPortletError=function(t){this.name="InvalidPortletError",this.message=t,this.stack=(new Error).stack};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r},{underscore:23}],8:[function(t,e,n){n.Clock={time:0,schedule:function(t,e,n){},unschedule:function(t){}},n.Audio={sampleRate:44100,start:function(){},stop:function(){},decode:function(t,e){e(null,t)}},n.Storage={get:function(t,e){}}},{}],9:[function(t,e,n){var i=t("events").EventEmitter,o=t("underscore"),s=t("../global");n.NamedMixin={nameIsUnique:!1,setName:function(t){if(!o.isString(t))return console.error("expected ["+this.type+"] name to be a string, got "+t);var e=this.name;this.emit("changing:name",e,t),this.name=t,s.namedObjects.register(this,this.type,t,this.nameIsUnique,e),this.emit("changed:name",e,t)},destroy:function(){s.namedObjects.unregister(this,this.type,this.name)}};var r=n.EventEmitterMixin=o.extend({},i.prototype,{destroy:function(){this.removeAllListeners()}}),a=n.Reference=function(t){this.referencedType=t,this._onNewObject=null,this._onChangedName=null,this.resolved=null,this._eventName="namedObjects:registered:"+this.referencedType,this._eventReceiver=new c};o.extend(a.prototype,r,{set:function(t){var e=this,n=s.namedObjects.get(this.referencedType,t)[0];this.name=t,this._stopListening(),n?this._setResolved(n):(this._setResolved(null),this._onNewObject=function(n){n.name===t&&(e._stopListening(),e._setResolved(n))},this._eventReceiver.on(s.emitter,this._eventName,this._onNewObject))},destroy:function(){this._eventReceiver.destroy(),r.destroy.apply(this)},_setResolved:function(t){var e=this,n=this.resolved;this.resolved=t,n&&n.removeListener("changing:name",e._onChangedName),t&&(this._onChangedName=function(){e._setResolved(null)},this._eventReceiver.on(t,"changing:name",this._onChangedName)),this.emit("changed",t,n)},_stopListening:function(){this._onNewObject&&(this._eventReceiver.removeListener(s.emitter,this._eventName,this._onNewObject),this._onNewObject=null)}}),n.UniqueIdsMixin={_generateId:function(){return this._idCounter++,this._idCounter},_idCounter:-1};var c=n.EventReceiver=function(){this._handlers=[]};o.extend(c.prototype,{addListener:function(t,e,n){this._handlers.push([t,e,n]),t.addListener(e,n)},once:function(t,e,n){var i=[t,e,n];this._handlers.push(i),t.once(e,n)},removeListener:function(t,e,n){this._handlers=o.reject(this._handlers,function(i){var o=i[0]===t&&i[1]===e&&i[2]===n;return o&&t.removeListener(e,n),o})},destroy:function(){this._handlers.forEach(function(t){t[0].removeListener(t[1],t[2])}),this._handlers=[]}}),c.prototype.on=c.prototype.addListener},{"../global":12,events:18,underscore:23}],10:[function(t,e,n){var i=t("underscore"),o=t("./utils"),s=n.Portlet=function(t,e){this.obj=t,this.id=e,this.connections=[],this.init()};i.extend(s.prototype,{crossPatch:!1,init:function(){},start:function(){},stop:function(){},message:function(t){},connection:function(t){},disconnection:function(t){},connect:function(t){if(-1!==this.connections.indexOf(t))return!1;if(!this.crossPatch&&!t.crossPatch&&this.obj.patch!==t.obj.patch)throw new Error("cannot connect objects that belong to different patches");return this.connections.push(t),t.connect(this),this.connection(t),!0},disconnect:function(t){var e=this.connections.indexOf(t);return-1===e?!1:(this.connections.splice(e,1),t.disconnect(this),this.disconnection(t),!0)}}),s.extend=o.chainExtend;n.Inlet=s.extend({}),n.Outlet=s.extend({})},{"./utils":11,underscore:23}],11:[function(t,e,n){var i=t("underscore"),o=t("../global"),s=/\$(\d+)/,r=/\$(\d+)/g;n.getDollarResolver=function(t){t=t.slice(0);var e=function(t,e){if(e>=t.length||0>e)throw new Error("$"+(e+1)+": argument number out of range");return t[e]},n=t.map(function(t){var n=s.exec(t);return n&&n[0]===t?function(t){var i=parseInt(n[1],10);return function(t){return e(t,i)}}(t):n?function(t){for(var n,i=[];n=r.exec(t);)i.push([n[0],parseInt(n[1],10)]);return function(n){var o=t.substr(0);return i.forEach(function(t){o=o.replace(t[0],e(n,t[1]))}),o}}(t):function(t){return function(){return t}}(t)});return function(t){return n.map(function(e,n){return e(t)})}},n.chainExtend=function(){var t=Array.prototype.slice.call(arguments,0),e=this,n=function(){e.apply(this,arguments)};return n.prototype=new e,i.extend.apply(this,[n.prototype,e.prototype].concat(t)),n.extend=this.extend,n},n.timeTag=function(t,e){return e?(t.timeTag=i.isNumber(e)?e:e.timeTag,t):t},n.getTimeTag=function(t){return t&&t.timeTag||o.clock&&o.clock.time||0}},{"../global":12,underscore:23}],12:[function(t,e,n){var i=t("underscore"),o=t("events").EventEmitter;n.settings={blockSize:16384,channelCount:2},n.isStarted=!1;var s=n.emitter=new o;s.emit=function(t){if(!i.contains([],t)&&0!==t.indexOf("msg:")&&0!==t.indexOf("namedObjects:registered")&&0!==t.indexOf("namedObjects:unregistered"))throw new Error("unknown event : "+t);o.prototype.emit.apply(this,arguments)},n.library={},n.patches={},n.audio=null,n.clock=null,n.storage=null,n.namedObjects={register:function(t,e,i,o,s){var r,a;if(this._store[e]=r=this._store[e]||{},r[i]=a=r[i]||[],-1===a.indexOf(t)){if(o&&a.length>0)throw new Error("there is already a "+e+' with name "'+i+'"');a.push(t)}s&&(a=r[s],a.splice(a.indexOf(t),1)),n.emitter.emit("namedObjects:registered:"+e,t)},unregister:function(t,e,i){var o,s=this._store[e],r=s?s[i]:null;r&&(o=r.indexOf(t),-1!==o&&(r.splice(o,1),n.emitter.emit("namedObjects:unregistered:"+e,t)))},get:function(t,e){return(this._store[t]||{})[e]||[]},reset:function(){this._store={}},_store:{}}},{events:18,underscore:23}],13:[function(t,e,n){var i=t("underscore"),o=t("./core/utils"),s=t("./core/mixins"),r=t("./core/PdObject"),a=t("./core/Patch"),c=t("./global"),u=t("./waa/portlets");n.declareObjects=function(t){t.receive=t.r=r.extend(s.NamedMixin,s.EventEmitterMixin,{type:"receive",outletDefs:[u.Outlet],abbreviations:["r"],init:function(t){var e=t[0],n=this;this._eventReceiver=new s.EventReceiver,this._onMessageReceived=this._onMessageReceived.bind(this),this._eventReceiver.on(this,"changed:name",function(t,e){t&&n._eventReceiver.removeListener(c.emitter,"msg:"+t,n._onMessageReceived),n._eventReceiver.on(c.emitter,"msg:"+e,n._onMessageReceived)}),this.setName(e)},destroy:function(){s.NamedMixin.destroy.apply(this,arguments),this._eventReceiver.destroy(),s.EventEmitterMixin.destroy.apply(this,arguments)},_onMessageReceived:function(t){this.o(0).message(t)}}),t.send=t.s=r.extend(s.NamedMixin,s.EventEmitterMixin,{type:"send",inletDefs:[u.Inlet.extend({message:function(t){c.emitter.emit("msg:"+this.obj.name,t)}})],abbreviations:["s"],init:function(t){this.setName(t[0])},destroy:function(){s.NamedMixin.destroy.apply(this,arguments),s.EventEmitterMixin.destroy.apply(this,arguments)}}),t.msg=r.extend({type:"msg",doResolveArgs:!1,inletDefs:[u.Inlet.extend({message:function(t){var e=t.timeTag;t=t.slice(0),t.unshift(0);for(var n=0;n<this.obj.resolvers.length;n++){var i=this.obj.resolvers[n];this.obj.outlets[0].message(o.timeTag(i(t),e))}}})],outletDefs:[u.Outlet],init:function(t){this.createResolvers(t)},createResolvers:function(t){for(var e=[[]],n=0;n<t.length;n++){var i=t[n];","==i?e.push([]):e[e.length-1].push(i)}0==e[e.length-1].length&&e.pop(),this.resolvers=[];for(var n in e){var s=e[n];this.resolvers.push(o.getDollarResolver(s))}}}),t.print=r.extend({type:"print",inletDefs:[u.Inlet.extend({message:function(t){console.log(this.obj.prefix?[this.obj.prefix].concat(t):t)}})],init:function(t){this.prefix=t[0]||"print"}}),t.text=r.extend({type:"text",init:function(t){this.text=t[0]}}),t.loadbang=r.extend({type:"loadbang",outletDefs:[u.Outlet],init:function(){var t=this;this._eventReceiver=new s.EventReceiver,this._onPatchStarted=function(){t.o(0).message(["bang"])},this._eventReceiver.on(this.patch,"started",this._onPatchStarted)},destroy:function(){this._eventReceiver.destroy()}});var e=r.extend({inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];"bang"!==e&&this.obj.setVal(e),this.obj.o(0).message(o.timeTag([this.obj.val],t))}}),u.Inlet.extend({message:function(t){var e=t[0];this.obj.setVal(e)}})],outletDefs:[u.Outlet],init:function(t){var e=t[0];this.setVal(e||0)},setVal:function(t){this.val=t}});t["float"]=t.f=e.extend({type:"float",setVal:function(t){return i.isNumber(t)?void(this.val=t):console.error("invalid [float] value "+t)}}),t["int"]=t.i=e.extend({type:"int",setVal:function(t){return i.isNumber(t)?void(this.val=Math.floor(t)):console.error("invalid [int] value "+t)}});var n=r.extend({inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];i.isNumber(e)?this.obj.valLeft=e:"bang"!==e&&console.error("invalid message : "+t),this.obj.o(0).message(o.timeTag([this.obj.compute()],t))}}),u.Inlet.extend({message:function(t){var e=t[0];return i.isNumber(e)?void(this.obj.valRight=e):console.error("invalid operand for ["+this.obj.type+"] "+e)}})],outletDefs:[u.Outlet],init:function(t){this.valRight=t[0]||0,this.valLeft=0},compute:function(){}});t["+"]=n.extend({type:"+",compute:function(){return this.valLeft+this.valRight}}),t["-"]=n.extend({type:"-",compute:function(){return this.valLeft-this.valRight}}),t["*"]=n.extend({type:"*",compute:function(){return this.valLeft*this.valRight}}),t["/"]=n.extend({type:"/",compute:function(){return 0==this.valRight?0:this.valLeft/this.valRight}}),t.min=n.extend({type:"min",compute:function(){return Math.min(this.valLeft,this.valRight)}}),t.max=n.extend({type:"max",compute:function(){return Math.max(this.valLeft,this.valRight)}}),t.mod=t["%"]=n.extend({type:"mod",compute:function(){return this.valRight<=0?0:this.valLeft<0?this.valRight+this.valLeft%this.valRight:this.valLeft%this.valRight}}),t.pow=n.extend({type:"pow",compute:function(){return Math.pow(this.valLeft,this.valRight)}});var l=r.extend({inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];this.obj.checkInput(e),this.obj.o(0).message(o.timeTag([this.obj.compute(e)],t))}})],outletDefs:[u.Outlet],checkInput:function(t){},compute:function(){}}),f=l.extend({checkInput:function(t){return i.isNumber(t)?void 0:console.error("invalid ["+this.type+"] value "+t)}});t.cos=f.extend({type:"cos",compute:function(t){return Math.cos(t)}}),t.sin=f.extend({type:"sin",compute:function(t){return Math.sin(t)}}),t.tan=f.extend({type:"tan",compute:function(t){return Math.tan(t)}}),t.atan2=n.extend({type:"atan2",compute:function(){return Math.atan2(this.valRight,this.valLeft)}}),t.atan=f.extend({type:"atan",compute:function(t){return Math.atan(t)}}),t.exp=f.extend({type:"exp",compute:function(t){return Math.exp(t)}}),t.log=f.extend({type:"log",compute:function(t){return Math.log(t)}}),t.abs=f.extend({type:"abs",compute:function(t){return Math.abs(t)}}),t.sqrt=f.extend({type:"sqrt",compute:function(t){return Math.sqrt(t)}}),t.wrap=f.extend({type:"wrap",compute:function(t){return t-Math.floor(t)}}),t.mtof=f.extend({type:"mtof",maxMidiNote:8.17579891564*Math.exp(86.585635235),compute:function(t){var e=0;return i.isNumber(t)?e=-1500>=t?0:t>1499?this.maxMidiNote:8.17579891564*Math.exp(.057762265*t):console.error("invalid [mtof] value "+t)}}),t.ftom=f.extend({type:"ftom",compute:function(t){return i.isNumber(t)?0>=t?-1500:17.312340491*Math.log(.122312206*t):console.error("invalid [ftom] value "+t)}}),t.rmstodb=f.extend({type:"rmstodb",compute:function(t){return 0>=t?0:20*Math.log(t)/Math.LN10+100}}),t.dbtorms=f.extend({type:"dbtorms",compute:function(t){return 0>=t?0:Math.exp(Math.LN10*(t-100)/20)}}),t.powtodb=f.extend({type:"powtodb",compute:function(t){return 0>=t?0:10*Math.log(t)/Math.LN10+100}}),t.dbtopow=f.extend({type:"dbtopow",compute:function(t){return 0>=t?0:Math.exp(Math.LN10*(t-100)/10)}}),t["samplerate~"]=l.extend({type:"samplerate~",compute:function(){return c.audio.sampleRate}}),t.spigot=r.extend({type:"spigot",inletDefs:[u.Inlet.extend({message:function(t){this.obj.passing&&this.obj.o(0).message(t)}}),u.Inlet.extend({message:function(t){var e=t[0];this.obj.setPassing(e)}})],outletDefs:[u.Outlet],init:function(t){var e=t[0];this.setPassing(e||0)},setPassing:function(t){return i.isNumber(t)?void(this.passing=Boolean(t)):console.error("invalid [spigot] value "+t)}}),t.trigger=t.t=r.extend({type:"trigger",inletDefs:[u.Inlet.extend({message:function(t){var e,n,s;for(e=this.obj.filters.length-1;e>=0;e--)if(n=this.obj.filters[e],"bang"===n)this.obj.o(e).message(o.timeTag(["bang"],t));else if("list"===n||"anything"===n)this.obj.o(e).message(t);else if("float"===n||i.isNumber(n))s=t[0],this.obj.o(e).message(i.isNumber(s)?o.timeTag([s],t):o.timeTag([0],t));else if("symbol"===n)if(s=t[0],"bang"===s)this.obj.o(e).message(o.timeTag(["symbol"],t));else if(i.isNumber(s))this.obj.o(e).message(o.timeTag(["float"],t));else{if(!i.isString(s))throw new Error("Got unexpected input "+t);this.obj.o(e).message(o.timeTag([s],t))}else this.obj.o(e).message(o.timeTag(["bang"],t))}})],init:function(t){var e,n;for(0===t.length&&(t=["bang","bang"]),e=0,n=t.length;n>e;e++)this.outlets.push(new u.Outlet(this,e));this.filters=t}});var h=u.Inlet.extend({message:function(t){var e=t[0];"bang"!==e&&(this.obj.memory[0]=e),this.obj.o(0).message(o.timeTag(this.obj.memory.slice(0),t))}}),d=u.Inlet.extend({message:function(t){var e=t[0];this.obj.memory[this.id]=e}});t.pack=r.extend({type:"pack",outletDefs:[u.Outlet],init:function(t){var e,n=t.length;for(0===n&&(t=["float","float"]),n=t.length,this.filters=t,this.memory=new Array(n),e=0;n>e;e++)this.inlets[e]=0===e?new h(this,e):new d(this,e),this.memory[e]="float"===t[e]?0:"symbol"===t[e]?"symbol":t[e]}}),t.select=t.sel=r.extend({type:"select",inletDefs:[u.Inlet.extend({message:function(t){var e,n=t[0];-1!==(e=this.obj.filters.indexOf(n))?this.obj.o(e).message(o.timeTag(["bang"],t)):this.obj.outlets.slice(-1)[0].message(o.timeTag([n],t))}}),u.Inlet.extend({message:function(t){this.obj.filters.length<=1&&(this.obj.filters=t)}})],init:function(t){var e,n;for(0===t.length&&(t=[0]),t.length>1&&this.inlets.pop(),e=0,n=t.length;n>e;e++)this.outlets[e]=new u.Outlet(this,e);this.outlets[e]=new u.Outlet(this,e),this.filters=t}}),t.moses=r.extend({type:"moses",inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];return i.isNumber(e)?void(e<this.obj.val?this.obj.o(0).message(o.timeTag([e],t)):this.obj.o(1).message(o.timeTag([e],t))):console.error("invalid [moses] value "+e)}}),u.Inlet.extend({message:function(t){var e=t[0];this.obj.setVal(e)}})],outletDefs:[u.Outlet,u.Outlet],init:function(t){var e=t[0];this.setVal(e||0)},setVal:function(t){return i.isNumber(t)?void(this.val=t):console.error("invalid [moses] value "+t)}}),t.clip=r.extend({type:"clip",inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];return i.isNumber(e)?void this.obj.o(0).message(e<this.obj.min?o.timeTag([this.obj.min],t):e>this.obj.max?o.timeTag([this.obj.max],t):o.timeTag([e],t)):console.error("invalid [clip] value "+e)}}),u.Inlet.extend({message:function(t){var e=t[0];this.obj.setMin(e)}}),u.Inlet.extend({message:function(t){var e=t[0];this.obj.setMax(e)}})],outletDefs:[u.Outlet],init:function(t){this.setMin(t[0]||0),this.setMax(t[1]||0)},setMin:function(t){return i.isNumber(t)?void(this.min=t):console.error("invalid [clip] min value "+t)},setMax:function(t){return i.isNumber(t)?void(this.max=t):console.error("invalid [clip] max value "+t)}}),t.swap=r.extend({type:"swap",inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];return i.isNumber(e)?(this.obj.o(1).message(o.timeTag([e],t)),void this.obj.o(0).message(o.timeTag([this.obj.val],t))):console.error("invalid [swap] value "+e)}}),u.Inlet.extend({message:function(t){var e=t[0];this.obj.setVal(e)}})],outletDefs:[u.Outlet,u.Outlet],init:function(t){var e=t[0];this.setVal(e||0)},setVal:function(t){return i.isNumber(t)?void(this.val=t):console.error("invalid [swap] value "+t)}}),t.until=r.extend({type:"until",inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];if("bang"===e)this.obj._startLoop(t.timeTag);else{if(!i.isNumber(e))return console.error("invalid [until] value "+e);this.obj._startLoop(t.timeTag,e)}}}),u.Inlet.extend({message:function(t){var e=t[0];return"bang"!==e?console.error("invalid command for [until] "+e):void this.obj._stopLoop()}})],outletDefs:[u.Outlet],init:function(){this._looping=!1},_startLoop:function(t,e){this._looping=!0;var n=this,s=0,r=function(){n.o(0).message(o.timeTag(["bang"],t))};if(i.isNumber(e))for(;this._looping&&e>s;)r(),s++;else for(;this._looping;)r();this._looping=!1},_stopLoop:function(){this._looping=!1}}),t.random=r.extend({type:"random",inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];"bang"===e&&this.obj.o(0).message(o.timeTag([Math.floor(Math.random()*this.obj.max)],t))}}),u.Inlet.extend({message:function(t){var e=t[0];this.obj.setMax(e)}})],outletDefs:[u.Outlet],init:function(t){var e=t[0];this.setMax(e||1)},setMax:function(t){return i.isNumber(t)?void(this.max=t):console.error("invalid [random] value "+t)}}),t.metro=r.extend({type:"metro",inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];if("bang"===e)this.obj._restartMetroTick(o.getTimeTag(t));else if("stop"===e)this.obj._stopMetroTick();else{if(!i.isNumber(e))return console.error("invalid [metro] value "+e);0===e?this.obj._stopMetroTick():this.obj._restartMetroTick(o.getTimeTag(t))}}}),u.Inlet.extend({message:function(t){var e=t[0];this.obj.setRate(e),this.obj._metroTick=this.obj._metroTickRateChange}})],outletDefs:[u.Outlet],init:function(t){var e=t[0];this.setRate(e||0),this._metroHandle=null,this._metroTick=this._metroTickNormal},setRate:function(t){return i.isNumber(t)?void(this.rate=Math.max(t,1)):console.error("invalid [metro] rate "+t)},destroy:function(){this._stopMetroTick()},_startMetroTick:function(t){var e=this;
null===this._metroHandle&&(this._metroHandle=c.clock.schedule(function(t){e._metroTick(t.timeTag)},t,this.rate))},_stopMetroTick:function(){null!==this._metroHandle&&(c.clock.unschedule(this._metroHandle),this._metroHandle=null)},_restartMetroTick:function(t){this._metroTick===this._metroTickRateChange&&(this._metroTick=this._metroTickNormal),this._stopMetroTick(),this._startMetroTick(t)},_metroTickNormal:function(t){this.outlets[0].message(o.timeTag(["bang"],t))},_metroTickRateChange:function(t){this._metroTick=this._metroTickNormal,this._restartMetroTick(t)}}),t.delay=t.del=r.extend({type:"delay",inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];"bang"===e?(this.obj._stopDelay(),this.obj._startDelay(o.getTimeTag(t))):"stop"===e?this.obj._stopDelay():(this.obj.setDelay(e),this.obj._stopDelay(),this.obj._startDelay(o.getTimeTag(t)))}}),u.Inlet.extend({message:function(t){var e=t[0];this.obj.setDelay(e)}})],outletDefs:[u.Outlet],init:function(t){var e=t[0];this.setDelay(e||0),this._delayHandle=null},setDelay:function(t){return i.isNumber(t)?void(this.delay=t):console.error("invalid [delay] length "+t)},destroy:function(){this._stopDelay()},_startDelay:function(t){var e=this;null===this._delayHandle&&(this._delayHandle=c.clock.schedule(function(){e.outlets[0].message(["bang"])},t+this.delay))},_stopDelay:function(){null!==this._delayHandle&&(c.clock.unschedule(this._delayHandle),this._delayHandle=null)}}),t.timer=r.extend({type:"timer",inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];return"bang"!==e?console.error("invalid command for [timer] "+e):void(this.obj.refTime=o.getTimeTag(t))}}),u.Inlet.extend({message:function(t){var e=t[0];return"bang"!==e?console.error("invalid command for [timer] "+e):void this.obj.outlets[0].message(o.timeTag([o.getTimeTag(t)-this.obj.refTime],t))}})],outletDefs:[u.Outlet],init:function(){this.refTime=0}}),t.change=r.extend({type:"change",inletDefs:[u.Inlet.extend({message:function(t){var e=t[0];e!==this.obj.last&&(this.obj.last=e,this.obj.o(0).message(o.timeTag([e],t)))}})],outletDefs:[u.Outlet],init:function(){this.last=null}}),t.array=t.table=r.extend(s.NamedMixin,s.EventEmitterMixin,{type:"array",nameIsUnique:!0,init:function(t){var e=t[0],n=t[1]||100;e&&this.setName(e),this.size=n,this.data=new Float32Array(n)},destroy:function(){s.NamedMixin.destroy.apply(this,arguments),s.EventEmitterMixin.destroy.apply(this,arguments)},setData:function(t,e){e&&(this.data=new Float32Array(t.length)),this.data.set(t.subarray(0,Math.min(this.data.length,t.length))),this.size=this.data.length,this.emit("changed:data")}}),t.soundfiler=r.extend({type:"soundfiler",inletDefs:[u.Inlet.extend({message:function(t){var e,n,o,s=this,r=t[0],a=!1;if(t=t.slice(1),"read"===r){for(;t.length&&"-"===t[0][0];){if(e=t.shift(),"-resize"!==e)return console.error("-wave"===e&&"-aiff"===e&&"-nextstep"===e&&"-raw"===e&&"-bytes"===e&&"-nframes"===e?e+" not supported":e+" not understood");a=!0}n=t.shift(),o=t,c.storage.get(n,function(t,e){return t?console.error("could not load file : "+t):void c.audio.decode(e,function(t,e){if(t)return console.error("Could not decode file : "+t);var n,r,u;r=o.map(function(t){return n=c.namedObjects.get("array",t)[0],n?n:(console.error('array "'+t+'" not found'),null)}),i.contains(r,null)||(1!==i.uniq(i.pluck(r,"size")).length&&(a=!0),r.forEach(function(t,n){u=e[n],u&&t.setData(u,a)}),s.obj.o(0).message([Math.min(r[0].size,e[0].length)]))})})}else console.error('command "'+r+'" is not supported')}})],outletDefs:[u.Outlet]}),t.pd=t.graph=a}},{"./core/Patch":5,"./core/PdObject":6,"./core/mixins":9,"./core/utils":11,"./global":12,"./waa/portlets":17,underscore:23}],14:[function(t,e,n){t("underscore");n.declareObjects=function(e){t("./glue").declareObjects(e),t("./controls").declareObjects(e),t("./waa/dsp").declareObjects(e),t("./waa/portlets").declareObjects(e)}},{"./controls":2,"./glue":13,"./waa/dsp":15,"./waa/portlets":17,underscore:23}],15:[function(t,e,n){var i=t("underscore"),o=t("waaoffsetnode"),s=t("waawhitenoisenode"),r=t("waatablenode"),a=t("../core/utils"),c=t("../core/mixins"),u=t("../core/PdObject"),l=t("./portlets"),f=t("../global");n.declareObjects=function(t){var e=u.extend({inletDefs:[l.DspInlet.extend({message:function(t){var e=t[0];if(!this.hasDspSource()){if(!i.isNumber(e))return console.error("invalid ["+this.obj.type+"] frequency "+e);e===1/0&&(e=0),this.obj.frequency=e,this.obj._updateFrequency(a.getTimeTag(t))}}}),l.Inlet.extend({message:function(t){var e=t[0];return i.isNumber(e)?void this.obj._updatePhase(e,a.getTimeTag(t)):console.error("invalid ["+this.obj.type+"] phase "+e)}})],outletDefs:[l.DspOutlet],init:function(t){this.frequency=t[0]||0},start:function(){this._createOscillator(0,0)},stop:function(){this._destroyOscillator()},_updateFrequency:function(t){this._oscNode&&this._oscNode.frequency.setValueAtTime(this.frequency,t/1e3)},_updatePhase:function(t,e){f.isStarted&&this._createOscillator(t,e)}});t["osc~"]=e.extend({type:"osc~",_createOscillator:function(t,e){t=2*t*Math.PI,this._oscNode=f.audio.context.createOscillator(),this._oscNode.setPeriodicWave(f.audio.context.createPeriodicWave(new Float32Array([0,Math.cos(t)]),new Float32Array([0,Math.sin(-t)]))),this._oscNode.start(e/1e3),this.o(0).setWaa(this._oscNode,0),this.i(0).setWaa(this._oscNode.frequency,0),this.i(0).message([this.frequency])},_destroyOscillator:function(){this._oscNode.stop(0),this._oscNode=null}}),t["phasor~"]=e.extend({type:"phasor~",_createOscillator:function(t,e){this._gainNode=f.audio.context.createGain(),this._gainNode.gain.value=.5,this._oscNode=f.audio.context.createOscillator(),this._oscNode.type="sawtooth",this._oscNode.start(e/1e3),this._oscNode.connect(this._gainNode),this._offsetNode=new o(f.audio.context),this._offsetNode.offset.value=1,this._offsetNode.connect(this._gainNode),this.o(0).setWaa(this._gainNode,0),this.i(0).setWaa(this._oscNode.frequency,0),this.i(0).message([this.frequency])},_destroyOscillator:function(){this._oscNode.stop(0),this._oscNode=null,this._gainNode=null,this._offsetNode=null}}),t["triangle~"]=e.extend({type:"triangle~",_createOscillator:function(t,e){this._oscNode=f.audio.context.createOscillator(),this._oscNode.type="triangle",this._oscNode.start(e/1e3),this.o(0).setWaa(this._oscNode,0),this.i(0).setWaa(this._oscNode.frequency,0),this.i(0).message([this.frequency])},_destroyOscillator:function(){this._oscNode.stop(0),this._oscNode=null}}),t["square~"]=e.extend({type:"square~",_createOscillator:function(t,e){this._oscNode=f.audio.context.createOscillator(),this._oscNode.type="square",this._oscNode.start(e/1e3),this.o(0).setWaa(this._oscNode,0),this.i(0).setWaa(this._oscNode.frequency,0),this.i(0).message([this.frequency])},_destroyOscillator:function(){this._oscNode.stop(0),this._oscNode=null}}),t["noise~"]=u.extend({type:"noise~",outletDefs:[l.DspOutlet],start:function(){this._noiseNode=new s(f.audio.context),this._noiseNode.start(0),this.o(0).setWaa(this._noiseNode,0)},stop:function(){this._noiseNode.stop(0),this._noiseNode.disconnect(),this._noiseNode=null}}),t["line~"]=u.extend({type:"line~",inletDefs:[l.Inlet.extend({init:function(){this._queue=[],this._lastValue=0},message:function(t){var e=this;if(this.obj._offsetNode){var n=t[0],o=a.getTimeTag(t),s=t[1]||0;if(!i.isNumber(n))return console.error("invalid [line~] value "+n);if(s&&!i.isNumber(s))return console.error("invalid [line~] duration "+s);this._refreshQueue(f.audio.time);var r=this._pushToQueue(o,n,s);this.obj._offsetNode.offset.cancelScheduledValues(r[0].t1/1e3+1e-6),r.forEach(function(t){t.t1!==t.t2?e.obj._offsetNode.offset.linearRampToValueAtTime(t.v2,t.t2/1e3):e.obj._offsetNode.offset.setValueAtTime(t.v2,t.t2/1e3)})}},_interpolate:function(t,e){return(e-t.t1)*(t.v2-t.v1)/(t.t2-t.t1)+t.v1},_refreshQueue:function(t){if(0!==this._queue.length){for(var e,n,i=0;(e=this._queue[i++])&&t>=e.t2;);n=this._queue.slice(0,i-1),this._queue=this._queue.slice(i-1),0===this._queue.length&&(this._lastValue=n[n.length-1].v2)}},_pushToQueue:function(t,e,n){for(var i,o=0,s=[];(i=this._queue[o++])&&t>=i.t2;);if(this._queue=this._queue.slice(0),this._queue.length){var r=this._queue[this._queue.length-1];t<r.t2?(this._queue=this._queue.slice(0,-1),i={t1:r.t1,v1:r.v1,t2:t,v2:this._interpolate(r,t)},s.push(i),this._queue.push(i)):t>r.t2&&(i={t1:r.t2,v1:r.v2,t2:t,v2:r.v2},s.push(i),this._queue.push(i))}else i={t1:0,v1:this._lastValue,t2:t,v2:this._lastValue},s.push(i),this._queue.push(i);return i={t1:t,v1:this._queue[this._queue.length-1].v2,t2:t+n,v2:e},s.push(i),this._queue.push(i),s}})],outletDefs:[l.DspOutlet],start:function(){this._offsetNode=new o(f.audio.context),this._offsetNode.offset.setValueAtTime(0,0),this.o(0).setWaa(this._offsetNode,0)},stop:function(){this._offsetNode=null}}),t["sig~"]=u.extend({type:"sig~",inletDefs:[l.Inlet.extend({message:function(t){var e=t[0];return i.isNumber(e)?(this.obj.value=e,void(this.obj._offsetNode&&this.obj._offsetNode.offset.setValueAtTime(e,a.getTimeTag(t)/1e3))):console.error("invalid [sig~] value "+e)}})],outletDefs:[l.DspOutlet],init:function(t){this.value=t[0]||0},start:function(){this._offsetNode=new o(f.audio.context),this._offsetNode.offset.setValueAtTime(0,0),this.o(0).setWaa(this._offsetNode,0),this.i(0).message([this.value])},stop:function(){this._offsetNode=null}});var n={message:function(t){var e=t[0];return i.isNumber(e)?(this.obj.frequency=e,void(this.obj._filterNode&&this.obj._filterNode.frequency.setValueAtTime(e,a.getTimeTag(t)/1e3))):console.error("invalid ["+this.obj.type+"] frequency "+e)}},h={message:function(t){var e=t[0];return i.isNumber(e)?(this.obj.Q=e,void(this.obj._filterNode&&this.obj._filterNode.Q.setValueAtTime(e,a.getTimeTag(t)/1e3))):console.error("invalid ["+this.obj.type+"] Q "+e)}},d=u.extend({inletDefs:[l.DspInlet,l.Inlet.extend(n)],outletDefs:[l.DspOutlet],init:function(t){this.frequency=t[0]||0},start:function(){this._filterNode=f.audio.context.createBiquadFilter(),this._filterNode.frequency.setValueAtTime(this.frequency,0),this._filterNode.type=this.waaFilterType,this.i(0).setWaa(this._filterNode,0),this.o(0).setWaa(this._filterNode,0),this.i(1).message([this.frequency])},stop:function(){this._filterNode=null}}),p=d.extend({waaFilterType:"bandpass",init:function(t){d.prototype.init.call(this,t),this.Q=t[1]||1},start:function(t){d.prototype.start.call(this,t),this._filterNode.Q.setValueAtTime(this.Q,0),this.i(2).message([this.Q])}});t["lop~"]=d.extend({type:"lop~",waaFilterType:"lowpass"}),t["hip~"]=d.extend({type:"hip~",waaFilterType:"highpass"}),t["bp~"]=p.extend({type:"bp~",inletDefs:[l.DspInlet,l.Inlet.extend(n),l.Inlet.extend(h)]}),t["vcf~"]=p.extend({type:"vcf~",inletDefs:[l.DspInlet,l.DspInlet.extend(n),l.Inlet.extend(h)],start:function(t){p.prototype.start.call(this,t),this.i(1).setWaa(this._filterNode.frequency,0)}});var g=u.extend({outletDefs:[l.DspOutlet],init:function(t){var e=t[0];this.setVal(e||0)},setVal:function(t){return i.isNumber(t)?void(this.val=t):console.error("invalid ["+this.obj.type+"] value "+t)}}),v={message:function(t){var e=t[0];this.obj.setVal(e),this.hasDspSource()||this._setValNoDsp(e,a.getTimeTag(t))},disconnection:function(t){l.DspInlet.prototype.disconnection.apply(this,arguments),t instanceof l.DspOutlet&&!this.hasDspSource()&&this._setValNoDsp(this.obj.val,0)}};t["*~"]=g.extend({type:"*~",inletDefs:[l.DspInlet,l.DspInlet.extend(v,{_setValNoDsp:function(t,e){this.obj._gainNode&&this.obj._gainNode.gain.setValueAtTime(t,e/1e3)}})],start:function(){this._gainNode=f.audio.context.createGain(),this.i(0).setWaa(this._gainNode,0),this.i(1).setWaa(this._gainNode.gain,0),this.o(0).setWaa(this._gainNode,0),this.i(1).hasDspSource()||this.i(1)._setValNoDsp(this.val,0)},stop:function(){this._gainNode=null}}),t["+~"]=g.extend({type:"+~",inletDefs:[l.DspInlet,l.DspInlet.extend(v,{_setValNoDsp:function(t,e){this.obj._offsetNode&&this.obj._offsetNode.offset.setValueAtTime(t,e/1e3)}})],start:function(){this._offsetNode=new o(f.audio.context),this._gainNode=f.audio.context.createGain(),this._gainNode.gain.value=1,this._offsetNode.offset.value=0,this._offsetNode.connect(this._gainNode,0,0),this.i(0).setWaa(this._gainNode,0),this.i(1).setWaa(this._offsetNode.offset,0),this.o(0).setWaa(this._gainNode,0),this.i(1).hasDspSource()||this.i(1)._setValNoDsp(this.val,0)},stop:function(){this._offsetNode.disconnect(),this._gainNode=null,this._offsetNode=null}}),t["-~"]=g.extend({type:"-~",inletDefs:[l.DspInlet,l.DspInlet.extend(v,{_setValNoDsp:function(t,e){this.obj._offsetNode&&this.obj._offsetNode.offset.setValueAtTime(t,e/1e3)}})],start:function(){this._offsetNode=new o(f.audio.context),this._gainNode=f.audio.context.createGain(),this._negateGainNode=f.audio.context.createGain(),this._gainNode.gain.value=1,this._negateGainNode.gain.value=-1,this._offsetNode.offset.value=0,this._offsetNode.connect(this._negateGainNode,0,0),this._negateGainNode.connect(this._gainNode,0,0),this.i(0).setWaa(this._gainNode,0),this.i(1).setWaa(this._offsetNode.offset,0),this.o(0).setWaa(this._gainNode,0),this.i(1).hasDspSource()||this.i(1)._setValNoDsp(this.val,0)},stop:function(){this._negateGainNode.disconnect(),this._offsetNode.disconnect(),this._gainNode=null,this._negateGainNode=null,this._offsetNode=null}});var m=u.extend({init:function(t){var e=this;this.array=new c.Reference("array"),this._onDataChangedHandler=null,this._eventReceiver=new c.EventReceiver,this._eventReceiver.on(this.array,"changed",function(t,n){n&&n.removeListener("changed:data",e._onDataChangedHandler),t&&(e._onDataChangedHandler=function(){e.dataChanged()},e._eventReceiver.on(t,"changed:data",e._onDataChangedHandler))})},dataChanged:function(){},destroy:function(){this._eventReceiver.destroy(),this.array.destroy()}});t["tabread~"]=t["tabread4~"]=m.extend({type:"tabread~",inletDefs:[l.DspInlet.extend({message:function(t){var e=t[0];"set"===e?this.obj.array.set(t[1]):console.error("unknown method "+e)},connection:function(){l.DspInlet.prototype.connection.apply(this,arguments),this.obj._updateDsp()},disconnection:function(){l.DspInlet.prototype.disconnection.apply(this,arguments),this.obj._updateDsp()}})],outletDefs:[l.DspOutlet],init:function(t){var e=this,n=t[0];m.prototype.init.apply(this,arguments),this._eventReceiver.on(this.array,"changed",function(){e._updateDsp()}),n&&this.array.set(n)},start:function(){this._tableNode=new r(f.audio.context),this._gainNode=f.audio.context.createGain(),this.i(0).setWaa(this._tableNode.position,0),this.o(0).setWaa(this._gainNode,0),this._updateDsp()},stop:function(){this._tableNode=null,this._gainNode=null},dataChanged:function(){this._tableNode&&(this._tableNode.table=this.array.resolved.data)},_updateDsp:function(){this._tableNode&&this.array.resolved&&this.i(0).hasDspSource()?(this._tableNode.table=this.array.resolved.data,this._tableNode.connect(this._gainNode)):this._tableNode&&this._tableNode.disconnect()}}),t["delwrite~"]=u.extend(c.NamedMixin,c.EventEmitterMixin,{type:"delwrite~",inletDefs:[l.DspInlet],init:function(t){var e=t[0],n=t[1];this.maxDelayTime=n||1e3,e&&this.setName(e)},start:function(){this._pipeNode=f.audio.context.createGain(),this.i(0).setWaa(this._pipeNode,0),this.emit("started")},stop:function(){this._pipeNode.disconnect(),this._pipeNode=null},destroy:function(){c.NamedMixin.destroy.apply(this,arguments),c.EventEmitterMixin.destroy.apply(this,arguments)}}),t["delread~"]=t["vd~"]=u.extend({type:"delread~",inletDefs:[l.DspInlet.extend({message:function(t){var e=t[0];this.obj.setDelayTime(e,a.getTimeTag(t))}})],outletDefs:[l.DspOutlet],init:function(t){var e=t[0],n=t[1];this._eventReceiver=new c.EventReceiver,this._delayTime=n||0,this._delWrite=new c.Reference("delwrite~"),this._onDelWriteStarted=null,e&&this._delWrite.set(e)},start:function(){this._createDelay(),this._onDelWriteChanged=function(t,e){f.isStarted&&t&&self._createDelay()},this._eventReceiver.on(this._delWrite,"changed",this._onDelWriteChanged)},stop:function(){this._toSecondsGain=null,this._delayNode.disconnect(),this._delayNode=null,this._delWrite.removeListener("changed",this._onDelWriteChanged),this._onDelWriteChanged=null},destroy:function(){this._delWrite.destroy(),this._eventReceiver.destroy()},setDelayTime:function(t,e){return i.isNumber(t)?(this._delayTime=t,void(this._delayNode&&!this.i(0).hasDspSource()&&this._delayNode.delayTime.setValueAtTime(this._delayTime/1e3,e/1e3||0))):console.error("invalid [delread~] length "+t)},_createDelay:function(){this._delayNode&&this._delayNode.disconnect();var t=this._delWrite.resolved?this._delWrite.resolved.maxDelayTime/1e3:1,e=this;if(this._delayNode=f.audio.context.createDelay(t),this._toSecondsGain||(this._toSecondsGain=f.audio.context.createGain(),this._toSecondsGain.gain.value=.001,this.i(0).setWaa(this._toSecondsGain,0)),this._toSecondsGain.connect(this._delayNode.delayTime),this.o(0).setWaa(this._delayNode,0),this.setDelayTime(this._delayTime),this._delWrite.resolved){var n=function(){e._delWrite.resolved._pipeNode.connect(e._delayNode)};this._delWrite.resolved._pipeNode?n():(this._onDelWriteStarted=n,this._eventReceiver.once(this._delWrite.resolved,"started",this._onDelWriteStarted))}}}),t["clip~"]=u.extend({type:"clip~",inletDefs:[l.DspInlet,l.Inlet.extend({message:function(t){var e=t[0];return i.isNumber(e)?(this.obj.minValue=e,void this.obj._updateGains()):console.error("invalid [clip~] min "+e)}}),l.Inlet.extend({message:function(t){var e=t[0];return i.isNumber(e)?(this.obj.maxValue=e,void this.obj._updateGains()):console.error("invalid [clip~] max "+e)}})],outletDefs:[l.DspOutlet],init:function(t){this.minValue=t[0]||0,this.maxValue=t[1]||0},start:function(){this._gainInNode=f.audio.context.createGain(),this._gainOutNode=f.audio.context.createGain(),this._waveShaperNode=f.audio.context.createWaveShaper(),this._gainInNode.connect(this._waveShaperNode),this.i(0).setWaa(this._gainInNode,0),this.o(0).setWaa(this._waveShaperNode,0),this._updateGains()},stop:function(){this._gainInNode=null,this._waveShaperNode=null,this._gainOutNode.disconnect(),this._gainOutNode=null},_updateGains:function(){if(this._waveShaperNode){var t,e=Math.max(Math.abs(this.minValue),Math.abs(this.maxValue)),n=f.audio.sampleRate,i=new Float32Array(n),o=-e,s=2*e/n;for(t=0;n>t;t++)i[t]=o>=this.minValue&&o<=this.maxValue?o:o>this.maxValue?this.maxValue:this.minValue,o+=s;this._waveShaperNode.curve=i,this._gainInNode.gain.setValueAtTime(0!==e?1/e:0,0)}}}),t["dac~"]=u.extend({type:"dac~",endPoint:!0,inletDefs:[l.DspInlet,l.DspInlet],start:function(){this.i(0).setWaa(f.audio.channels[0],0),this.i(1).setWaa(f.audio.channels[1],0)}}),t["adc~"]=u.extend({type:"adc~",outletDefs:[l.DspOutlet,l.DspOutlet],init:function(){this.stream=null},start:function(){var t=this;this.stream?this._updateSource():(this.o(0).setWaa(f.audio.context.createGain(),0),this.o(1).setWaa(f.audio.context.createGain(),0),f.audio.getUserMedia(function(e,n){return e?console.error("error obtaining mic input : "+e):(t.stream=n,void(f.isStarted&&t._updateSource()))}))},stop:function(){this._sourceNode.disconnect(),this._sourceNode=null,this._splitterNode=null},_updateSource:function(){this.stream&&(this._sourceNode=f.audio.context.createMediaStreamSource(this.stream),this._splitterNode=f.audio.context.createChannelSplitter(2),this._sourceNode.connect(this._splitterNode),this.o(0).setWaa(this._splitterNode,0),this.o(1).setWaa(this._splitterNode,1))}})}},{"../core/PdObject":6,"../core/mixins":9,"../core/utils":11,"../global":12,"./portlets":17,underscore:23,waaoffsetnode:29,waatablenode:31,waawhitenoisenode:33}],16:[function(t,e,n){var i=t("underscore"),o=t("getusermedia"),s=t("waaclock"),r=(t("../global"),n.Audio=function(t){return"undefined"==typeof AudioContext?console.error("this environment doesn't support Web Audio API"):(this.channelCount=t.channelCount,this.setContext(t.audioContext||new AudioContext),this.sampleRate=this.context.sampleRate,this.stream=null,void Object.defineProperty(this,"time",{get:function(){return 1e3*this.context.currentTime}}))});r.prototype.start=function(){},r.prototype.stop=function(){},r.prototype.decode=function(t,e){this.context.decodeAudioData(t,function(t){var n,i=[];for(n=0;n<t.numberOfChannels;n++)i.push(t.getChannelData(n));e(null,i)},function(t){e(new Error("error decoding "+t))})},r.prototype.getUserMedia=function(t){var e=this;this.stream?t(null,this.stream):o({audio:{mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googTypingNoiseDetection:!1}}},function(n,i){e.stream=i,t(n,i)})},r.prototype.setContext=function(t){var e;for(this.context=t,this._channelMerger=this.context.createChannelMerger(this.channelCount),this._channelMerger.connect(this.context.destination),this.channels=[],e=0;e<this.channelCount;e++)this.channels.push(this.context.createGain()),this.channels[e].connect(this._channelMerger,0,e)};var a=n.Clock=function(t){var e=this;this._audioContext=t.audioContext,this._waaClock=t.waaClock||new s(t.audioContext),this._waaClock.start(),Object.defineProperty(this,"time",{get:function(){return 1e3*e._audioContext.currentTime}})};a.prototype.schedule=function(t,e,n){var o=function(e){void 0==e.timeTag&&(e.timeTag=1e3*e.deadline),t(e)},s=this._waaClock.callbackAtTime(o,e/1e3);return Object.defineProperty(s,"timeTag",{get:function(){return 1e3*this.deadline}}),i.isNumber(n)&&s.repeat(n/1e3),s},a.prototype.unschedule=function(t){t.clear()};var c=n.Storage=function(){};c.prototype.get=function(t,e){var n=new XMLHttpRequest;n.onload=function(t){200===this.status?e(null,this.response):e(new Error("HTTP "+this.status+": "+this.statusText))},n.onerror=function(t){e(t)},n.open("GET",t,!0),n.responseType="arraybuffer",n.send()}},{"../global":12,getusermedia:19,underscore:23,waaclock:27}],17:[function(t,e,n){var i=t("underscore"),o=t("waawire"),s=t("../core/utils"),r=t("../core/PdObject"),a=t("../core/portlets").Inlet,c=t("../core/portlets").Outlet,u=t("../global"),l="undefined"!=typeof window?window.AudioParam:function(){},f={future:function(t,e){this.message(s.timeTag(e,t))}},h=n.Inlet=a.extend(f),d=n.Outlet=c.extend({message:function(t){this.connections.forEach(function(e){e.message(t)})}}),p=n.DspInlet=a.extend(f,{hasDspSource:function(){return i.filter(this.connections,function(t){return t instanceof g}).length>0},init:function(){this._started=!1},start:function(){this._started=!0},stop:function(){this._waa=null,this._started=!1},setWaa:function(t,e){var n=this;this._waa={node:t,input:e},t instanceof l&&t.setValueAtTime(0,0),this._started&&i.chain(this.connections).filter(function(t){return t instanceof g}).forEach(function(t){t._waaUpdate(n)}).value()}}),g=n.DspOutlet=c.extend({init:function(){this._waaConnections={},this._started=!1},start:function(){this._started=!0,this.connections.forEach(this._waaConnect.bind(this))},stop:function(){this._started=!1,this.connections.forEach(this._waaDisconnect.bind(this)),this._waaConnections={}},connection:function(t){if(!(t instanceof p))throw new Error("can only connect to DSP inlet");this._started&&this._waaConnect(t)},disconnection:function(t){this._started&&this._waaDisconnect(t)},message:function(){throw new Error("dsp outlet received a message")},setWaa:function(t,e){this._waa={node:t,output:e},this._started&&i.values(this._waaConnections).forEach(function(n){n.swapSource(t,e)})},_waaConnect:function(t){var e=new o(u.audio.context);this._waaConnections[this._getConnectionId(t)]=e,e.connect(this._waa.node,t._waa.node,this._waa.output,t._waa.input)},_waaDisconnect:function(t){var e=this._waaConnections[this._getConnectionId(t)];delete this._waaConnections[this._getConnectionId(t)],e.close()},_waaUpdate:function(t){this._waaConnections[this._getConnectionId(t)].swapDestination(t._waa.node,t._waa.input)},_getConnectionId:function(t){return t.obj.id+":"+t.id}});n.declareObjects=function(t){var e=h.extend({message:function(t){this.obj.outlets[0].message(t)}}),n=p.extend({message:function(t){this.obj.outlets[0].message(t)}}),i=g.extend({stop:function(){g.prototype.stop.apply(this,arguments),this._outNodeConnector&&this._outNodeConnector.close(),this._outNodeConnector=null,this._outNode&&this._outNode.disconnect(),this._outNode=null},setWaa:function(t,e){this._outNodeConnector&&this._outNodeConnector.close(),this._outNode||(this._outNode=u.audio.context.createGain()),g.prototype.setWaa.apply(this,arguments),this._outNodeConnector=new o(u.audio.context),this._outNodeConnector.connect(this._waa.node,this._outNode,this._waa.output,0)},getOutNode:function(){return this._outNode},message:function(t){this.sinks.forEach(function(e){e.message(t)})}}),s={start:function(){this._gainNode=u.audio.context.createGain(),this._gainNode.gain.value=1,this.i(0).setWaa(this._gainNode,0),this.o(0).setWaa(this._gainNode,0)},stop:function(){this._gainNode=null}};t.outlet=r.extend({type:"outlet",inletDefs:[e],outletDefs:[d.extend({crossPatch:!0})]}),t.inlet=r.extend({type:"inlet",inletDefs:[e.extend({crossPatch:!0})],outletDefs:[d]}),t["outlet~"]=r.extend(s,{type:"outlet~",inletDefs:[n],outletDefs:[i.extend({crossPatch:!0})]}),t["inlet~"]=r.extend(s,{type:"inlet~",inletDefs:[n.extend({crossPatch:!0})],outletDefs:[i]})}},{"../core/PdObject":6,"../core/portlets":10,"../core/utils":11,"../global":12,underscore:23,waawire:35}],18:[function(t,e,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function s(t){return"number"==typeof t}function r(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!s(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,n,i,s,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),c=1;i>c;c++)s[c-1]=arguments[c];n.apply(this,s)}else if(r(n)){for(i=arguments.length,s=new Array(i-1),c=1;i>c;c++)s[c-1]=arguments[c];for(u=n.slice(),i=u.length,c=0;i>c;c++)u[c].apply(this,s)}return!0},i.prototype.addListener=function(t,e){var n;if(!o(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned){var n;n=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!o(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){var n,i,s,a;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,i=-1,n===e||o(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(n)){for(a=s;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],o(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?o(t._events[e])?1:t._events[e].length:0}},{}],19:[function(t,e,n){t("webrtc-adapter");e.exports=function(t,e){}},{"webrtc-adapter":37}],20:[function(t,e,n){var i=t("underscore"),o=["obj","floatatom","symbolatom","msg","text"],s=/ |\r\n?|\n/,r=/,(?!\\)/,a=/\\(\$\d+)/g,c=/\\\,/g,u=/\\\;/g,l=/(#((.|\r|\n)*?)[^\\\\])\r{0,1}\n{0,1};\r{0,1}(\n|$)/i,f=function(t){return t.split("").reverse().join("")},h=n.parseArg=function(t){var e=d(t);if(i.isNumber(e)&&!isNaN(e))return e;if(i.isString(t)){var n,t=t.substr(0);for(t=t.replace(c,","),t=t.replace(u,";");n=a.exec(t);)t=t.replace(n[0],n[1]);return t}throw new Error("couldn't parse arg "+t)},d=n.parseFloat=function(t){return i.isNumber(t)&&!isNaN(t)?t:i.isString(t)?parseFloat(t):0/0},p=n.parseArgs=function(t){if(i.isNumber(t)&&!isNaN(t))return[t];var e,n,o,r=i.isString(t)?t.split(s):t,a=[];for(n=0,o=r.length;o>n;n++)""!==(e=r[n])&&a.push(h(e));return a};n.parse=function(t){return g(t)[0]};var g=function(t){var e,n=null,a=-1,c=function(){return a++,a},u={nodes:[],connections:[],layout:void 0,args:[]},h=!0,d=function(){t=t.slice(e.index+e[0].length)};for(l.lastIndex=0;e=t.match(l);){var m=f(e[1]).split(r).reverse().map(f),y=m[1],_=m[0].split(s),b=_[0];if("#N"===b){var x=_[1];if("canvas"!==x)throw new Error("invalid element type for chunk #N : "+x);if(h)u.layout={x:parseInt(_[2],10),y:parseInt(_[3],10),width:parseInt(_[4],10),height:parseInt(_[5],10),openOnLoad:_[7]},u.args=[_[6]],d();else{var N=g(t),w=N[0],j=N[2];u.nodes.push(i.extend({id:c(),subpatch:w},j)),t=N[1]}}else if("#X"===b){var x=_[1];if("restore"===x){var O={x:parseInt(_[2],10),y:parseInt(_[3],10)},D=_[4],T=[];if("pd"===D&&T.push(_[5]),n){for(var A=n.args[1];n.data.length<A;)n.data.push(0);n=null}return d(),[u,t,{proto:D,args:T,layout:O}]}if(i.contains(o,x)){var C,T,N,O={x:parseInt(_[2],10),y:parseInt(_[3],10)};if("obj"===x?(C=_[4],T=_.slice(5)):(C=x,T=_.slice(4)),"text"===x&&(T=[_.slice(4).join(" ")]),N=v(C,T,O),T=N[0],O=N[1],y)for(var E=y.split(s);E.length;){var I=E.shift();"f"===I&&(O.width=E.shift())}u.nodes.push({id:c(),proto:C,layout:O,args:p(T)})}else if("array"===x){var M=_[2],k=parseFloat(_[3]),S={id:c(),proto:"table",args:[M,k],data:[]};u.nodes.push(S),n=S}else if("connect"===x){var R=parseInt(_[2],10),P=parseInt(_[4],10),W=parseInt(_[3],10),L=parseInt(_[5],10);u.connections.push({source:{id:R,port:W},sink:{id:P,port:L}})}else if("coords"!==x)throw new Error("invalid element type for chunk #X : "+x);d()}else{if("#A"!==b)throw new Error("invalid chunk : "+b);var q,V,F,G=parseFloat(_[1]);if(n)for(q=2,V=_.length;V>q;q++,G++)F=parseFloat(_[q]),i.isNumber(F)&&!isNaN(F)&&(n.data[G]=F);else console.error("got table data outside of a table.");d()}h=!1}return[u,""]},v=function(t,e,n){return"floatatom"===t?(n.width=e[0],n.labelPos=e[3],n.label=e[4],e=[e[1],e[2],e[5],e[6]]):"symbolatom"===t?(n.width=e[0],n.labelPos=e[3],n.label=e[4],e=[e[1],e[2],e[5],e[6]]):"bng"===t?(n.size=e[0],n.hold=e[1],n.interrupt=e[2],n.label=e[6],n.labelX=e[7],n.labelY=e[8],n.labelFont=e[9],n.labelFontSize=e[10],n.bgColor=e[11],n.fgColor=e[12],n.labelColor=e[13],e=[e[3],e[4],e[5]]):"tgl"===t?(n.size=e[0],n.label=e[4],n.labelX=e[5],n.labelY=e[6],n.labelFont=e[7],n.labelFontSize=e[8],n.bgColor=e[9],
n.fgColor=e[10],n.labelColor=e[11],e=[e[1],e[2],e[3],e[12],e[13]]):"nbx"===t?(n.size=e[0],n.height=e[1],n.log=e[4],n.label=e[8],n.labelX=e[9],n.labelY=e[10],n.labelFont=e[11],n.labelFontSize=e[12],n.bgColor=e[13],n.fgColor=e[14],n.labelColor=e[15],n.logHeight=e[17],e=[e[2],e[3],e[5],e[6],e[7],e[16]]):"vsl"===t?(n.width=e[0],n.height=e[1],n.log=e[4],n.label=e[8],n.labelX=e[9],n.labelY=e[10],n.labelFont=e[11],n.labelFontSize=e[12],n.bgColor=e[13],n.fgColor=e[14],n.labelColor=e[15],n.steadyOnClick=e[17],e=[e[2],e[3],e[5],e[6],e[7],e[2]+(e[3]-e[2])*e[16]/12700]):"hsl"===t?(n.width=e[0],n.height=e[1],n.log=e[4],n.label=e[8],n.labelX=e[9],n.labelY=e[10],n.labelFont=e[11],n.labelFontSize=e[12],n.bgColor=e[13],n.fgColor=e[14],n.labelColor=e[15],n.steadyOnClick=e[17],e=[e[2],e[3],e[5],e[6],e[7],e[2]+(e[3]-e[2])*e[16]/12700]):"vradio"===t?(n.size=e[0],n.label=e[6],n.labelX=e[7],n.labelY=e[8],n.labelFont=e[9],n.labelFontSize=e[10],n.bgColor=e[11],n.fgColor=e[12],n.labelColor=e[13],e=[e[1],e[2],e[3],e[4],e[5],e[14]]):"hradio"===t?(n.size=e[0],n.label=e[6],n.labelX=e[7],n.labelY=e[8],n.labelFont=e[9],n.labelFontSize=e[10],n.bgColor=e[11],n.fgColor=e[12],n.labelColor=e[13],e=[e[1],e[2],e[3],e[4],e[5],e[14]]):"vu"===t?(n.width=e[0],n.height=e[1],n.label=e[3],n.labelX=e[4],n.labelY=e[5],n.labelFont=e[6],n.labelFontSize=e[7],n.bgColor=e[8],n.labelColor=e[9],n.log=e[10],e=[e[2],e[11]]):"cnv"===t&&(n.size=e[0],n.width=e[1],n.height=e[2],n.label=e[5],n.labelX=e[6],n.labelY=e[7],n.labelFont=e[8],n.labelFontSize=e[9],n.bgColor=e[10],n.labelColor=e[11],e=[e[3],e[4],e[12]]),[e,n]}},{underscore:21}],21:[function(t,e,n){(function(){var t=this,i=(t._,{}),o=Array.prototype,s=Object.prototype,r=Function.prototype,a=(o.push,o.slice),c=(o.concat,s.toString),u=s.hasOwnProperty,l=o.forEach,f=(o.map,o.reduce,o.reduceRight,o.filter,o.every,o.some,o.indexOf),h=(o.lastIndexOf,Array.isArray),d=Object.keys,p=(r.bind,function(t){});"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=p),n._=p):t._=p,p.VERSION="1.4.4";var g=p.each=p.forEach=function(t,e,n){if(null!=t)if(l&&t.forEach===l)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,s=t.length;s>o;o++)if(e.call(n,t[o],o,t)===i)return}else for(var r in t)if(p.has(t,r)&&e.call(n,t[r],r,t)===i)return};p.map=p.collect=function(t,e,n){};p.reduce=p.foldl=p.inject=function(t,e,n,i){},p.reduceRight=p.foldr=function(t,e,n,i){},p.find=p.detect=function(t,e,n){},p.filter=p.select=function(t,e,n){},p.reject=function(t,e,n){},p.every=p.all=function(t,e,n){};var v=p.some=p.any=function(t,e,n){};p.contains=p.include=function(t,e){return null==t?!1:f&&t.indexOf===f?-1!=t.indexOf(e):v(t,function(t){})},p.invoke=function(t,e){},p.pluck=function(t,e){},p.where=function(t,e,n){},p.findWhere=function(t,e){},p.max=function(t,e,n){},p.min=function(t,e,n){},p.shuffle=function(t){};p.sortBy=function(t,e,n){};p.groupBy=function(t,e,n){},p.countBy=function(t,e,n){},p.sortedIndex=function(t,e,n,i){},p.toArray=function(t){},p.size=function(t){},p.first=p.head=p.take=function(t,e,n){},p.initial=function(t,e,n){},p.last=function(t,e,n){},p.rest=p.tail=p.drop=function(t,e,n){},p.compact=function(t){};p.flatten=function(t,e){},p.without=function(t){},p.uniq=p.unique=function(t,e,n,i){},p.union=function(){},p.intersection=function(t){},p.difference=function(t){},p.zip=function(){},p.object=function(t,e){},p.indexOf=function(t,e,n){},p.lastIndexOf=function(t,e,n){},p.range=function(t,e,n){},p.bind=function(t,e){},p.partial=function(t){},p.bindAll=function(t){},p.memoize=function(t,e){},p.delay=function(t,e){},p.defer=function(t){},p.throttle=function(t,e){},p.debounce=function(t,e,n){},p.once=function(t){},p.wrap=function(t,e){},p.compose=function(){},p.after=function(t,e){},p.keys=d||function(t){},p.values=function(t){},p.pairs=function(t){},p.invert=function(t){var e={};for(var n in t)p.has(t,n)&&(e[t[n]]=n);return e},p.functions=p.methods=function(t){var e=[];for(var n in t)p.isFunction(t[n])&&e.push(n);return e.sort()},p.extend=function(t){return g(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},p.pick=function(t){},p.omit=function(t){},p.defaults=function(t){},p.clone=function(t){},p.tap=function(t,e){};p.isEqual=function(t,e){},p.isEmpty=function(t){},p.isElement=function(t){},p.isArray=h||function(t){},p.isObject=function(t){},g(["Arguments","Function","String","Number","Date","RegExp"],function(t){p["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),p.isArguments(arguments)||(p.isArguments=function(t){}),"function"!=typeof/./&&(p.isFunction=function(t){return"function"==typeof t}),p.isFinite=function(t){},p.isNaN=function(t){},p.isBoolean=function(t){},p.isNull=function(t){},p.isUndefined=function(t){},p.has=function(t,e){return u.call(t,e)},p.noConflict=function(){},p.identity=function(t){},p.times=function(t,e,n){},p.random=function(t,e){};var m={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};m.unescape=p.invert(m.escape);({escape:new RegExp("["+p.keys(m.escape).join("")+"]","g"),unescape:new RegExp("("+p.keys(m.unescape).join("|")+")","g")});p.each(["escape","unescape"],function(t){p[t]=function(t){}}),p.result=function(t,e){},p.mixin=function(t){g(p.functions(t),function(e){p[e]=t[e];p.prototype[e]=function(){}})};p.uniqueId=function(t){},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};p.template=function(t,e,n){},p.chain=function(t){};p.mixin(p),g(["pop","push","reverse","shift","sort","splice","unshift"],function(t){o[t];p.prototype[t]=function(){}}),g(["concat","join","slice"],function(t){o[t];p.prototype[t]=function(){}}),p.extend(p.prototype,{chain:function(){},value:function(){}})}).call(this)},{}],22:[function(t,e,n){function i(){}var o=e.exports={};o.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var i=[];if(e){var o=document.createElement("div"),s=new MutationObserver(function(){var t=i.slice();i.length=0,t.forEach(function(t){t()})});return s.observe(o,{attributes:!0}),function(t){i.length||o.setAttribute("yes","no"),i.push(t)}}return n?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),i.length>0)){var n=i.shift();n()}},!0),function(t){i.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],23:[function(t,e,n){(function(){function t(t){return function(t,e,n,i){}}function i(t){return function(e,n,i){n=m(n,i);for(var o=x(e),s=t>0?0:o-1;s>=0&&o>s;s+=t)if(n(e[s],s,e))return s;return-1}}function o(t,e,n){return function(i,o,s){var r=0,a=x(i);if("number"==typeof s)t>0?r=s>=0?s:Math.max(s+a,r):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(i,o),i[s]===o?s:-1;if(o!==o)return s=e(f.call(i,r,a),g.isNaN),s>=0?s+r:-1;for(s=t>0?r:a-1;s>=0&&a>s;s+=t)if(i[s]===o)return s;return-1}}function s(t,e){}var r=this,a=(r._,Array.prototype),c=Object.prototype,u=Function.prototype,l=a.push,f=a.slice,h=c.toString,d=(c.hasOwnProperty,Array.isArray),p=Object.keys,g=(u.bind,Object.create,function(t){return t instanceof g?t:this instanceof g?void(this._wrapped=t):new g(t)});"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=g),n._=g):r._=g,g.VERSION="1.8.3";var v=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(t){};case 2:return function(t,e){};case 3:return function(t,e,n){};case 4:return function(t,e,n,i){}}return function(){}},m=function(t,e,n){return null==t?g.identity:g.isFunction(t)?v(t,e,n):g.isObject(t)?g.matcher(t):g.property(t)};g.iteratee=function(t,e){};var y=function(t,e){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var o=1;i>o;o++)for(var s=arguments[o],r=t(s),a=r.length,c=0;a>c;c++){var u=r[c];e&&void 0!==n[u]||(n[u]=s[u])}return n}},_=function(t){return function(e){return null==e?void 0:e[t]}},b=Math.pow(2,53)-1,x=_("length"),N=function(t){var e=x(t);return"number"==typeof e&&e>=0&&b>=e};g.each=g.forEach=function(t,e,n){e=v(e,n);var i,o;if(N(t))for(i=0,o=t.length;o>i;i++)e(t[i],i,t);else{var s=g.keys(t);for(i=0,o=s.length;o>i;i++)e(t[s[i]],s[i],t)}return t},g.map=g.collect=function(t,e,n){e=m(e,n);for(var i=!N(t)&&g.keys(t),o=(i||t).length,s=Array(o),r=0;o>r;r++){var a=i?i[r]:r;s[r]=e(t[a],a,t)}return s},g.reduce=g.foldl=g.inject=t(1),g.reduceRight=g.foldr=t(-1),g.find=g.detect=function(t,e,n){var i;return i=N(t)?g.findIndex(t,e,n):g.findKey(t,e,n),void 0!==i&&-1!==i?t[i]:void 0},g.filter=g.select=function(t,e,n){var i=[];return e=m(e,n),g.each(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i},g.reject=function(t,e,n){return g.filter(t,g.negate(m(e)),n)},g.every=g.all=function(t,e,n){},g.some=g.any=function(t,e,n){},g.contains=g.includes=g.include=function(t,e,n,i){return N(t)||(t=g.values(t)),("number"!=typeof n||i)&&(n=0),g.indexOf(t,e,n)>=0},g.invoke=function(t,e){},g.pluck=function(t,e){return g.map(t,g.property(e))},g.where=function(t,e){},g.findWhere=function(t,e){},g.max=function(t,e,n){},g.min=function(t,e,n){},g.shuffle=function(t){},g.sample=function(t,e,n){},g.sortBy=function(t,e,n){return e=m(e,n),g.pluck(g.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var w=function(t){return function(t,e,n){}};g.groupBy=w(function(t,e,n){}),g.indexBy=w(function(t,e,n){}),g.countBy=w(function(t,e,n){}),g.toArray=function(t){return t?g.isArray(t)?f.call(t):N(t)?g.map(t,g.identity):g.values(t):[]},g.size=function(t){},g.partition=function(t,e,n){},g.first=g.head=g.take=function(t,e,n){},g.initial=function(t,e,n){},g.last=function(t,e,n){},g.rest=g.tail=g.drop=function(t,e,n){},g.compact=function(t){};var j=function(t,e,n,i){for(var o=[],s=0,r=i||0,a=x(t);a>r;r++){var c=t[r];if(N(c)&&(g.isArray(c)||g.isArguments(c))){e||(c=j(c,e,n));var u=0,l=c.length;for(o.length+=l;l>u;)o[s++]=c[u++]}else n||(o[s++]=c)}return o};g.flatten=function(t,e){},g.without=function(t){return g.difference(t,f.call(arguments,1))},g.uniq=g.unique=function(t,e,n,i){g.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=m(n,i));for(var o=[],s=[],r=0,a=x(t);a>r;r++){var c=t[r],u=n?n(c,r,t):c;e?(r&&s===u||o.push(c),s=u):n?g.contains(s,u)||(s.push(u),o.push(c)):g.contains(o,c)||o.push(c)}return o},g.union=function(){},g.intersection=function(t){},g.difference=function(t){var e=j(arguments,!0,!0,1);return g.filter(t,function(t){return!g.contains(e,t)})},g.zip=function(){},g.unzip=function(t){},g.object=function(t,e){},g.findIndex=i(1),g.findLastIndex=i(-1),g.sortedIndex=function(t,e,n,i){},g.indexOf=o(1,g.findIndex,g.sortedIndex),g.lastIndexOf=o(-1,g.findLastIndex),g.range=function(t,e,n){};g.bind=function(t,e){},g.partial=function(t){var e=(f.call(arguments,1),function(){});return e},g.bindAll=function(t){},g.memoize=function(t,e){},g.delay=function(t,e){},g.defer=g.partial(g.delay,g,1),g.throttle=function(t,e,n){},g.debounce=function(t,e,n){},g.wrap=function(t,e){},g.negate=function(t){return function(){return!t.apply(this,arguments)}},g.compose=function(){},g.after=function(t,e){},g.before=function(t,e){},g.once=g.partial(g.before,2);var O=!{toString:null}.propertyIsEnumerable("toString");g.keys=function(t){if(!g.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)g.has(t,n)&&e.push(n);return O&&s(t,e),e},g.allKeys=function(t){if(!g.isObject(t))return[];var e=[];for(var n in t)e.push(n);return O&&s(t,e),e},g.values=function(t){for(var e=g.keys(t),n=e.length,i=Array(n),o=0;n>o;o++)i[o]=t[e[o]];return i},g.mapObject=function(t,e,n){},g.pairs=function(t){for(var e=g.keys(t),n=e.length,i=Array(n),o=0;n>o;o++)i[o]=[e[o],t[e[o]]];return i},g.invert=function(t){for(var e={},n=g.keys(t),i=0,o=n.length;o>i;i++)e[t[n[i]]]=n[i];return e},g.functions=g.methods=function(t){var e=[];for(var n in t)g.isFunction(t[n])&&e.push(n);return e.sort()},g.extend=y(g.allKeys),g.extendOwn=g.assign=y(g.keys),g.findKey=function(t,e,n){},g.pick=function(t,e,n){},g.omit=function(t,e,n){},g.defaults=y(g.allKeys,!0),g.create=function(t,e){},g.clone=function(t){},g.tap=function(t,e){},g.isMatch=function(t,e){};g.isEqual=function(t,e){},g.isEmpty=function(t){},g.isElement=function(t){},g.isArray=d||function(t){},g.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},g.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){g["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),g.isArguments(arguments)||(g.isArguments=function(t){}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(g.isFunction=function(t){return"function"==typeof t||!1}),g.isFinite=function(t){},g.isNaN=function(t){},g.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},g.isNull=function(t){},g.isUndefined=function(t){},g.has=function(t,e){},g.noConflict=function(){},g.identity=function(t){return t},g.constant=function(t){},g.noop=function(){},g.property=_,g.propertyOf=function(t){},g.matcher=g.matches=function(t){},g.times=function(t,e,n){},g.random=function(t,e){},g.now=Date.now||function(){};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=g.invert(D),A=function(t){{var e="(?:"+g.keys(t).join("|")+")";RegExp(e),RegExp(e,"g")}return function(t){}};g.escape=A(D),g.unescape=A(T),g.result=function(t,e,n){};g.uniqueId=function(t){},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};g.template=function(t,e,n){},g.chain=function(t){var e=g(t);return e._chain=!0,e};var C=function(t,e){return t._chain?g(e).chain():e};g.mixin=function(t){g.each(g.functions(t),function(e){var n=g[e]=t[e];g.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),C(this,n.apply(g,t))}})},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){a[t];g.prototype[t]=function(){}}),g.each(["concat","join","slice"],function(t){a[t];g.prototype[t]=function(){}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){},"function"==typeof define&&define.amd&&define("underscore",[],function(){})}).call(this)},{}],24:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],25:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],26:[function(t,e,n){(function(e,i){function o(t,e){var i={seen:[],stylize:r};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(e)?i.showHidden=e:e&&n._extend(i,e),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=s),c(i,t,i.depth)}function s(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function r(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function c(t,e,i){if(t.customInspect&&e&&D(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(i,t);return _(o)||(o=c(t,o,i)),o}var s=u(t,e);if(s)return s;var r=Object.keys(e),g=a(r);if(t.showHidden&&(r=Object.getOwnPropertyNames(e)),O(e)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return l(e);if(0===r.length){if(D(e)){var v=e.name?": "+e.name:"";return t.stylize("[Function"+v+"]","special")}if(N(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(j(e))return t.stylize(Date.prototype.toString.call(e),"date");if(O(e))return l(e)}var m="",y=!1,b=["{","}"];if(p(e)&&(y=!0,b=["[","]"]),D(e)){var x=e.name?": "+e.name:"";m=" [Function"+x+"]"}if(N(e)&&(m=" "+RegExp.prototype.toString.call(e)),j(e)&&(m=" "+Date.prototype.toUTCString.call(e)),O(e)&&(m=" "+l(e)),0===r.length&&(!y||0==e.length))return b[0]+m+b[1];if(0>i)return N(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var w;return w=y?f(t,e,i,g,r):r.map(function(n){return h(t,e,i,g,n,y)}),t.seen.pop(),d(w,m,b)}function u(t,e){if(x(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,i,o){for(var s=[],r=0,a=e.length;a>r;++r)s.push(I(e,String(r))?h(t,e,n,i,String(r),!0):"");return o.forEach(function(o){o.match(/^\d+$/)||s.push(h(t,e,n,i,o,!0))}),s}function h(t,e,n,i,o,s){var r,a,u;if(u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},u.get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),I(i,o)||(r="["+o+"]"),a||(t.seen.indexOf(u.value)<0?(a=v(n)?c(t,u.value,null):c(t,u.value,n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),x(r)){if(s&&o.match(/^\d+$/))return a;r=JSON.stringify(""+o),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=t.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=t.stylize(r,"string"))}return r+": "+a}function d(t,e,n){var i=0,o=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function y(t){return"number"==typeof t}function _(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function x(t){return void 0===t}function N(t){return w(t)&&"[object RegExp]"===A(t)}function w(t){return"object"==typeof t&&null!==t}function j(t){return w(t)&&"[object Date]"===A(t)}function O(t){return w(t)&&("[object Error]"===A(t)||t instanceof Error)}function D(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function A(t){return Object.prototype.toString.call(t)}function C(t){return 10>t?"0"+t.toString(10):t.toString(10)}function E(){var t=new Date,e=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var M=/%[sdj%]/g;n.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,s=i.length,r=String(t).replace(M,function(t){if("%%"===t)return"%";if(n>=s)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return t}}),a=i[n];s>n;a=i[++n])r+=v(a)||!w(a)?" "+a:" "+o(a);return r},n.deprecate=function(t,o){function s(){if(!r){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),r=!0}return t.apply(this,arguments)}if(x(i.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(e.noDeprecation===!0)return t;var r=!1;return s};var k,S={};n.debuglog=function(t){if(x(k)&&(k=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!S[t])if(new RegExp("\\b"+t+"\\b","i").test(k)){var i=e.pid;S[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,i,e)}}else S[t]=function(){};return S[t]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=g,n.isNull=v,n.isNullOrUndefined=m,n.isNumber=y,n.isString=_,n.isSymbol=b,n.isUndefined=x,n.isRegExp=N,n.isObject=w,n.isDate=j,n.isError=O,n.isFunction=D,n.isPrimitive=T,n.isBuffer=t("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",E(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":25,_process:22,inherits:24}],27:[function(t,e,n){var i=t("./lib/WAAClock");e.exports=i,"undefined"!=typeof window&&(window.WAAClock=i)},{"./lib/WAAClock":28}],28:[function(t,e,n){var i=("undefined"!=typeof window,{toleranceLate:.1,toleranceEarly:.001}),o=function(t,e,n){};o.prototype.clear=function(){},o.prototype.repeat=function(t){},o.prototype.tolerance=function(t){},o.prototype.isRepeated=function(){},o.prototype.schedule=function(t){},o.prototype.timeStretch=function(t,e){},o.prototype._execute=function(){},o.prototype._refreshEarlyLateDates=function(){};var s=e.exports=function(t,e){e=e||{},this.tickMethod=e.tickMethod||"ScriptProcessorNode",this.toleranceEarly=e.toleranceEarly||i.toleranceEarly,this.toleranceLate=e.toleranceLate||i.toleranceLate,this.context=t,this._events=[],this._started=!1};s.prototype.setTimeout=function(t,e){},s.prototype.callbackAtTime=function(t,e){},s.prototype.timeStretch=function(t,e,n){},s.prototype.start=function(){if(this._started===!1){if(this._started=!0,this._events=[],"ScriptProcessorNode"===this.tickMethod){var t=256;this._clockNode=this.context.createScriptProcessor(t,1,1),this._clockNode.connect(this.context.destination),this._clockNode.onaudioprocess=function(){}}else if("manual"!==this.tickMethod)throw new Error("invalid tickMethod "+this.tickMethod)}},s.prototype.stop=function(){},s.prototype._tick=function(){},s.prototype._createEvent=function(t,e){},s.prototype._insertEvent=function(t){},s.prototype._removeEvent=function(t){},s.prototype._hasEvent=function(t){},s.prototype._indexByTime=function(t){},s.prototype._absTime=function(t){},s.prototype._relTime=function(t){}},{}],29:[function(t,e,n){var i=t("./lib/WAAOffsetNode");e.exports=i,"undefined"!=typeof window&&(window.WAAOffsetNode=i)},{"./lib/WAAOffsetNode":30}],30:[function(t,e,n){var i=e.exports=function(t){};i.prototype.connect=function(){},i.prototype.disconnect=function(){},i._ones=[]},{}],31:[function(t,e,n){var i=t("./lib/WAATableNode");e.exports=i,"undefined"!=typeof window&&(window.WAATableNode=i)},{"./lib/WAATableNode":32}],32:[function(t,e,n){var i=(t("waaoffsetnode"),e.exports=function(t){});i.prototype.connect=function(){},i.prototype.disconnect=function(){},i.prototype._setTable=function(t){}},{waaoffsetnode:29}],33:[function(t,e,n){var i=t("./lib/WAAWhiteNoiseNode");e.exports=i,"undefined"!=typeof window&&(window.WAAWhiteNoiseNode=i)},{"./lib/WAAWhiteNoiseNode":34}],34:[function(t,e,n){var i=e.exports=function(t){};i.prototype.connect=function(){},i.prototype.disconnect=function(){},i.prototype.start=function(){},i.prototype.stop=function(){},i.prototype._prepareOutput=function(){}},{}],35:[function(t,e,n){var i=t("./lib/WAAWire");e.exports=i,"undefined"!=typeof window&&(window.WAAWire=i)},{"./lib/WAAWire":36}],36:[function(t,e,n){var i=e.exports=function(t){this.context=t,this._source=null,this._output=null,this._destination=null,this._input=null,this._gainNode=null,this._discardedGainNode=null,this._atTime=0,this._closed=!1},o=function(t){return function(){return this._clean(),this[t].apply(this,[this._atTime].concat([].slice.call(arguments,0))),this._atTime=0,this}};i.prototype.connect=o("_connect"),i.prototype.swapSource=o("_swapSource"),i.prototype.swapDestination=o("_swapDestination"),i.prototype.close=o("_close"),i.prototype.atTime=function(t){},i.prototype._connect=function(t,e,n,i,o){if(this._gainNode)throw new Error("Wire already connected");this._source=e,this._destination=n,this._output=i||0,this._input=o||0,this._doConnections(t)},i.prototype._swapSource=function(t,e,n){this._discardedGainNode=this._gainNode,this._discardedGainNode.gain.setValueAtTime(0,t),this._source=e,this._output=n||0,this._doConnections(t)},i.prototype._swapDestination=function(t,e,n){this._discardedGainNode=this._gainNode,this._discardedGainNode.gain.setValueAtTime(0,t),this._destination=e,this._input=n||0,this._doConnections(t)},i.prototype._close=function(t){if(this._closed===!0)throw new Error("Wire already closed");this._discardedGainNode=this._gainNode,this._gainNode.gain.setValueAtTime(0,t),this._gainNode=null,this._closed=!0},i.prototype._doConnections=function(t){var e=this.context.createGain();e.gain.setValueAtTime(0,0),e.gain.setValueAtTime(1,t),this._gainNode=e,this._source.connect(e,this._output),this._destination instanceof AudioParam?e.connect(this._destination,0):e.connect(this._destination,0,this._input)},i.prototype._clean=function(){this._discardedGainNode&&0===this._discardedGainNode.gain.value&&(this._discardedGainNode.disconnect(),this._discardedGainNode=null)};var s=function(){if("undefined"!=typeof window&&window.OfflineAudioContext){var t=new OfflineAudioContext(1,1,44100),e=t.createBufferSource(),n=t.createGain(),i=t.createBuffer(1,1,44100);i.getChannelData(0)[0]=1,e.buffer=i,e.connect(n),e.connect(t.destination),e.start(0),n.connect(t.destination),e.disconnect(n),t.oncomplete=function(t){},t.startRendering()}};s()},{}],37:[function(t,e,n){"use strict"},{}]},{},[1]);